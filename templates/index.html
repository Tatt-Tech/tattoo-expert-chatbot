<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
 <title>
  Your Personal Tattoo Expert
 </title>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
 <script src="https://code.jquery.com/jquery-3.6.0.min.js">
 </script>
 <style>
  .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            margin-left: 20px;
            max-width: 350px;
            min-width: 325px;
            display: none;
            border-radius: 20px;
            z-index: 100;
        }
        .chat-content {
          background-color: #f1f1f1;
          padding: 25px;
          border-radius: 20px;
          display: flex;
          flex-direction: column;
          position: relative;
      }
      #initial-message {
    background-color: white;
    padding: 20px 25px;
    border-radius: 50px;
    display: inline-block;
}
        .tattoo-icon {
            width: 75px;
            height: 75px;
            background-color: #38afdd;
            position: fixed;
            bottom: 20px;
            right: 20px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
        }
        .avatar-icon {
          width: 50px;
          height: 50px;
          background-color: white;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
          margin-right: 15px;
          flex-shrink: 0;
          position: absolute; 
          top: 10px; 
          left: 10px; 
          box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
      }  
      .avatar-icon img {
          width: 24px;
          height: 24px; 
      }
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            margin-top: 15px;
        }
        .chat-widget .chatbot-message {
          display: flex;
          align-items: center;
        }
        .chat-widget .chatbot-message img {
          height: 30px;
        }
        .chat-widget .chatbot-message {
          display: flex;
          align-items: center;
          margin-bottom: 20px;
        }
        .chat-widget .chatbot-message img {
          height: 30px;
        }
        .loading-dots {
          display: inline-block;
          width: 20px;
          font-size: 14px;
          line-height: 1;
          animation: loadingDots 1s infinite;
        }
        @keyframes loadingDots {
          0%, 20% {
            color: rgba(0,0,0,0);
            text-shadow:
              .25em 0 0 rgba(0,0,0,0),
              .5em 0 0 rgba(0,0,0,0);}
          40% {
            color: black;
            text-shadow:
              .25em 0 0 rgba(0,0,0,0),
              .5em 0 0 rgba(0,0,0,0);}
          60% {
            text-shadow:
              .25em 0 0 black,
              .5em 0 0 rgba(0,0,0,0);}
          80%, 100% {
            text-shadow:
              .25em 0 0 black,
              .5em 0 0 black;}
        }
         .link {
          text-align: center; 
          margin-top: 15px;
          font-size: 12px;
          display: flex !important;
          align-content: center !important;
          justify-content: center !important;
         } 
         .logo {
          width: 50px;
          vertical-align: center !important;
        }
        .open_logo {
          width: 50px;
          margin-left: 5px;
        }
        .chat-messages {
          max-height: 200px;
          overflow-y: auto;
          padding-right: 10px;
          padding-left: 50px;
          margin-bottom: 15px;
        }
.close-button {
  position: absolute;
  top: 10px;
  right: 20px;
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  color: #888;
}
.close-button:hover {
  color: #555;
}
.popup-close-button {
  position: absolute;
  top: 20px;
  right: 30px;
  cursor: pointer;
  font-size: 30px;
  font-weight: bold;
  color: #fff;
}
.response-container {
    background-color: white;
    padding: 20px 25px;
    border-radius: 50px;
    margin-bottom: 15px;
}
.popup {
  display: none;
  position: fixed;
  bottom: 100px;
  right: 20px;
  padding: 20px;
  border-radius: 20px;
  z-index: 99;
  max-width: 375px;
}
.popup p{
    font-size: 14px !important;   
}
.popup-content {
  display: flex;
  align-items: center;
  padding: 25px;
}
.popup-text {
  background-color: white;
  padding: 20px 35px;
  border-radius: 50px;
  margin-left: 15px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
}
 </style>
 <div id="phone_number" style="display: none;">
  +1 (208) 732-2671
 </div>
 <div id="address" style="display: none;">
  Twin Falls, ID USA
 </div>
 <div id="name" style="display: none;">
  Tatt Tech
 </div>
 <div id="hours" style="display: none;">
  Mon-Fri: 9am - 5pm | Sat-Sun: Closed
 </div>
 <div id="email" style="display: none;">
  info@tatt-tech.com
 </div>
 <div id="tatt" style="display: none;">
 </div>
</head>
<body>
 <div class="popup">
  <span id="popup-close-button" class="popup-close-button">
   Ã—
  </span>
  <div class="avatar-icon">
   <img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/robot.svg" alt="Avatar Icon">
  </div>
  <div class="popup-content">
   <div class="chatbot-message">
    <div class="popup-text" id="popup-text">
    </div>
   </div>
  </div>
 </div>
 <div class="tattoo-icon">
  <img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/magic-tatt-gun.svg" alt="Tattoo Gun Icon" style="width: 50px; height: 50px; padding-bottom: 5px;">
 </div>
 <div class="chat-widget">
  <div class="chat-content">
   <span id="close-button" class="close-button">
    Ã—
   </span>
   <div id="chatbot-avatar">
    <div class="avatar-icon">
     <img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/robot.svg" alt="Avatar Icon">
    </div>
   </div>
   <div class="chat-messages">
    <div class="chatbot-message" id="initial-message">
     <div>
      <div id="initial-message-text">
      </div>
     </div>
    </div>
    <div id="chatbot-answer">
    </div>
   </div>
   <textarea id="message" class="form-control" rows="1" style="resize: none; height: auto; margin-top: 25px;" placeholder="Ask a question...">   </textarea>
   <div class="buttons-container">
    <button id="send" class="btn btn-primary mt-2" style="background-color: #38afdd; border: none;">
     Send
    </button>
    <button id="clear" class="btn btn-secondary mt-2">
     Clear
    </button>
   </div>
   <div class="link">
    <p>
     Powered by
     <a href="https://www.tatt-tech.com/" target="_blank">
      <img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/tatt-tech-high-resolution-logo-color-on-transparent-background.png" alt="Tatt Tech" class="logo">
     </a>
     x
     <a href="https://www.openai.com/">
      <img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/OpenAI_Logo.svg.png" alt="OpenAI" class="open_logo">
     </a>
    </p>
   </div>
  </div>
 </div>
 <script>
  $(document).ready(function () {
    function typeWriter(elementId, text, speed) {
        var i = 0;
        function typingAnimation() {
            if (i < text.length) {
                document.getElementById(elementId).innerHTML += text.charAt(i);
                i++;
                setTimeout(typingAnimation, speed);
            }
        }
        typingAnimation();
    }
    $(document).mouseup(function (e) {
        var container = $(".popup");
        if (!container.is(e.target) && container.has(e.target).length === 0) {
            container.fadeOut();
        }
    });
    function scrollToTop() {
        $(".chat-messages").animate({ scrollTop: 0 }, "slow");
    }
    $(".tattoo-icon").click(function () {
        if ($("#initial-message-text").text() === "") {
            typeWriter("initial-message-text", "Hi, I'm Aurora, your personal tattoo expert!\n\nIs there anything I can help with? ðŸ˜Š", 50);
        }
        $(".chat-widget").toggle();
        $(".tattoo-icon").toggle();
    });
    $("#close-button").click(function () {
        $(".chat-widget").toggle();
        $(".tattoo-icon").toggle();
    });
    $(document).click(function (event) {
        if (!$(event.target).closest(".chat-widget, .tattoo-icon").length) {
            $(".chat-widget").hide();
            $(".tattoo-icon").show();
        }
    });
    $(".chat-content").click(function () {
        event.stopPropagation();
    });
    setTimeout(function () {
        typeWriter("popup-text", "Hey, I'm Aurora! I could handle all your customer questions ðŸ˜Š Our first 100 clients get me for free! Give me a try below ðŸ’¬", 50);
        $(".popup").fadeIn(1000);
    }, 2500);
    $("#popup-close-button").click(function () {
        $(".popup").fadeOut(1);
    });
    $(".tattoo-icon").click(function () {
        $(".popup").fadeOut(1);
        // The rest of the click event code remains unchanged
    });
    $("#send").click(function () {
        var message = $("#message").val();
        if (message.trim() === "") {
            return;
        }
        $("#initial-message").hide();
        var loadingId = "loading-" + Date.now();
        var loadingHtml = '<div class="chatbot-message">' +
                              '<div class="avatar-icon">' +
                                  '<img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/robot.svg" alt="Avatar Icon">' +
                              '</div>' +
                              '<div class="response-container" id="' + loadingId + '">' +
                                  '<span class="loading-dots">...</span>' +
                              '</div>' +
                          '</div>';
        $(".chat-messages").prepend(loadingHtml);
        scrollToTop();
        $.ajax({
            url: "https://tattoo-expert.herokuapp.com/api/chat",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({ "message": message }),
            success: function (data) {
                $("#" + loadingId).remove();
                var responseId = "response-" + Date.now();
                var responseHtml = '<div class="chatbot-message">' +
                                       '<div class="avatar-icon">' +
                                           '<img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/robot.svg" alt="Avatar Icon">' +
                                       '</div>' +
                                       '<div class="response-container" id="' + responseId + '">' +
                                       '</div>' +
                                   '</div>';
                               $(".chat-messages").prepend(responseHtml);
                scrollToTop();
                var updatedAnswer = data.answer
                    .replace("{phone_number}", phoneNumber)
                    .replace("{address}", address)
                    .replace("{name}", name)
                    .replace("{hours}", hours)
                    .replace("{email}", email)
                    .replace("{tatt}", tatt);
                typeWriter(responseId, updatedAnswer, 50);
                $("#message").val("").focus();
            }
        });
    });
    $("#clear").click(function () {
      $(".chat-messages").html("");
      $("#message").val("");
        var responseId = "response-" + Date.now();
        var responseHtml = '<div class="chatbot-message">' +
                               '<div class="avatar-icon">' +
                                   '<img src="https://irp.cdn-website.com/dfaf08d8/dms3rep/multi/robot.svg" alt="Avatar Icon">' +
                               '</div>' +
                               '<div class="response-container" id="' + responseId + '">' +
                               '</div>' +
                           '</div>';
        $(".chat-messages").prepend(responseHtml); // Insert the new message container at the top
        scrollToTop(); // Scroll to the top after adding the new message
        typeWriter(responseId, "Anything else I can help with? ðŸ˜Š", 50); // Display the new message with the typing animation
    });
});
var phoneNumber = document.getElementById("phone_number").innerHTML;
var address = document.getElementById("address").innerHTML;
var name = document.getElementById("name").innerHTML;
var hours = document.getElementById("hours").innerHTML;
var email = document.getElementById("email").innerHTML;
var tatt = document.getElementById("tatt").innerHTML;
</script>
</body>
</html>